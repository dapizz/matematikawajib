<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Trigonometri Dasar - Matematika Wajib SMA">
    <title>Trigonometri Dasar - Media Belajar Daffa</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Specific Styles */
        .fraction {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            vertical-align: middle;
            margin: 0 4px;
            font-family: var(--font-display);
        }
        .fraction-numerator { padding: 2px 8px; font-size: 1rem; line-height: 1.3; }
        .fraction-line { width: 100%; height: 2px; background: var(--text-primary); border-radius: 1px; }
        .fraction-denominator { padding: 2px 8px; font-size: 1rem; line-height: 1.3; }
        .fraction-lg .fraction-numerator, .fraction-lg .fraction-denominator { font-size: 1.25rem; padding: 4px 12px; }
        .formula-box .fraction { background: var(--bg-card); padding: 8px 12px; border-radius: var(--radius-sm); margin: 0 8px; }
        .formula-box .fraction-line { background: var(--accent-primary); }

        .trig-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--bg-card);
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }
        .trig-table th, .trig-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid var(--border-light);
        }
        .trig-table th {
            background: var(--accent-bg);
            color: var(--accent-primary);
            font-weight: 700;
        }
        .trig-table tr:last-child td { border-bottom: none; }

        /* Animation Canvas Container */
        .unit-circle-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }
        
        /* Trig Info Panel */
        .trig-info-panel {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        .trig-stat {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: var(--radius-md);
            text-align: center;
            transition: transform 0.2s;
        }
        .trig-stat:hover { transform: translateY(-2px); }
        .trig-label { display: block; font-size: 0.85rem; color: var(--text-muted); margin-bottom: 5px; }
        .trig-value { font-size: 1.4rem; font-weight: 700; }
        .val-sin { color: #e74c3c; }
        .val-cos { color: #3498db; }
        .val-tan { color: #f1c40f; }

        /* SVG Styles */
        .grid-line { stroke: var(--border-light); stroke-width: 1; }
        .axis-line { stroke: var(--text-muted); stroke-width: 1.5; }
        .radius-line { stroke: var(--text-muted); stroke-width: 2; stroke-dasharray: 5,5; }
        .triangle-line { stroke-width: 3; stroke-linecap: round; }
        .projection-line { stroke-width: 2; opacity: 0.6; }
        .interactive-point {
            cursor: grab;
            transition: r 0.1s;
        }
        .interactive-point:active { cursor: grabbing; }
        .interactive-point:hover { r: 12; }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <!-- Header -->
        <header class="header">
            <div class="header-inner">
                <div class="logo">
                    <svg class="logo-icon" viewBox="0 0 40 40" fill="none">
                        <rect x="4" y="8" width="32" height="24" rx="2" stroke="currentColor" stroke-width="2"/>
                        <path d="M4 14h32" stroke="currentColor" stroke-width="2"/>
                        <circle cx="10" cy="11" r="2" fill="currentColor"/>
                        <circle cx="16" cy="11" r="2" fill="currentColor"/>
                        <rect x="8" y="18" width="24" height="2" rx="1" fill="currentColor" opacity="0.5"/>
                    </svg>
                    <span class="logo-text">Media Belajar Daffa</span>
                </div>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle tema">
                    <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
                    <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                <!-- Page Header -->
                <div class="page-header">
                    <nav class="breadcrumb">
                        <a href="../index.html">Beranda</a><span>/</span>
                        <a href="index.html">Matematika Wajib</a><span>/</span>
                        <span class="current">Trigonometri Dasar</span>
                    </nav>
                    <div class="accent-line"></div>
                    <h1 class="page-title">Trigonometri Dasar</h1>
                    <p class="page-subtitle">Memahami perbandingan trigonometri, sudut istimewa, identitas, serta aturan sinus dan cosinus.</p>
                </div>

                <!-- Navigation Buttons -->
                <div class="nav-btn-group">
                    <a href="index.html" class="nav-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg> Kembali ke Daftar Materi</a>
                    <a href="../index.html" class="nav-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/><polyline points="9 22 9 12 15 12 15 22"/></svg> Beranda</a>
                </div>

                <!-- Quick Navigation -->
                <nav class="quick-nav" id="quickNav">
                    <a href="#materi-inti" class="quick-nav-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 016.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z"/></svg> Materi Inti</a>
                    <a href="#animasi-interaktif" class="quick-nav-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg> Animasi</a>
                    <a href="#contoh-soal" class="quick-nav-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/></svg> Contoh Soal</a>
                    <a href="#latihan-soal" class="quick-nav-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg> Latihan</a>
                    <a href="#kuis" class="quick-nav-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg> Kuis</a>
                </nav>

                <!-- Learning Objectives -->
                <section class="content-section">
                    <div class="section-header">
                        <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                        <h2 class="section-title">Tujuan Pembelajaran</h2>
                    </div>
                    <div class="objectives-list">
                        <div class="objective-item"><span class="objective-number">1</span><span class="objective-text">Memahami perbandingan trigonometri (sin, cos, tan)</span></div>
                        <div class="objective-item"><span class="objective-number">2</span><span class="objective-text">Menghafal dan menggunakan nilai sudut istimewa</span></div>
                        <div class="objective-item"><span class="objective-number">3</span><span class="objective-text">Menggunakan identitas trigonometri dasar</span></div>
                        <div class="objective-item"><span class="objective-number">4</span><span class="objective-text">Menerapkan aturan sinus dan cosinus</span></div>
                    </div>
                </section>

                <!-- Material Content -->
                <section class="content-section" id="materi-inti">
                    <div class="section-header">
                        <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 016.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z"/></svg>
                        <h2 class="section-title">Materi Inti</h2>
                    </div>
                    <div class="material-content">
                        <h3>1. Perbandingan Trigonometri</h3>
                        <p>Pada segitiga siku-siku, perbandingan sisi-sisi terhadap sudut tertentu (θ) didefinisikan sebagai:</p>
                        
                        <div class="formula-box">
                            <div class="formula-label">Definisi (SOH CAH TOA)</div>
                            <div class="formula">
                                sin θ = <span class="fraction fraction-lg"><span class="fraction-numerator">Depan</span><span class="fraction-line"></span><span class="fraction-denominator">Miring</span></span>
                                &nbsp;&nbsp;
                                cos θ = <span class="fraction fraction-lg"><span class="fraction-numerator">Samping</span><span class="fraction-line"></span><span class="fraction-denominator">Miring</span></span>
                                &nbsp;&nbsp;
                                tan θ = <span class="fraction fraction-lg"><span class="fraction-numerator">Depan</span><span class="fraction-line"></span><span class="fraction-denominator">Samping</span></span>
                            </div>
                        </div>

                        <h3>2. Sudut Istimewa</h3>
                        <p>Nilai trigonometri untuk sudut istimewa (0°, 30°, 45°, 60°, 90°):</p>
                        
                        <table class="trig-table">
                            <thead>
                                <tr>
                                    <th>θ</th>
                                    <th>0°</th>
                                    <th>30°</th>
                                    <th>45°</th>
                                    <th>60°</th>
                                    <th>90°</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>sin θ</strong></td>
                                    <td>0</td>
                                    <td>1/2</td>
                                    <td>√2/2</td>
                                    <td>√3/2</td>
                                    <td>1</td>
                                </tr>
                                <tr>
                                    <td><strong>cos θ</strong></td>
                                    <td>1</td>
                                    <td>√3/2</td>
                                    <td>√2/2</td>
                                    <td>1/2</td>
                                    <td>0</td>
                                </tr>
                                <tr>
                                    <td><strong>tan θ</strong></td>
                                    <td>0</td>
                                    <td>√3/3</td>
                                    <td>1</td>
                                    <td>√3</td>
                                    <td>~</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>3. Identitas Trigonometri</h3>
                        <div class="formula-box">
                            <div class="formula-label">Identitas Pythagoras</div>
                            <div class="formula">sin² θ + cos² θ = 1</div>
                        </div>

                        <h3>4. Aturan Sinus dan Cosinus</h3>
                        <div class="formula-box">
                            <div class="formula-label">Aturan Sinus</div>
                            <div class="formula">
                                <span class="fraction fraction-lg"><span class="fraction-numerator">a</span><span class="fraction-line"></span><span class="fraction-denominator">sin A</span></span>
                                =
                                <span class="fraction fraction-lg"><span class="fraction-numerator">b</span><span class="fraction-line"></span><span class="fraction-denominator">sin B</span></span>
                            </div>
                        </div>
                        <div class="formula-box">
                            <div class="formula-label">Aturan Cosinus</div>
                            <div class="formula">a² = b² + c² - 2bc cos A</div>
                        </div>
                    </div>
                </section>

                <!-- Interactive Animations -->
                <section class="content-section" id="animasi-interaktif">
                    <div class="section-header">
                        <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                        <h2 class="section-title">Animasi Interaktif: Lingkaran Satuan</h2>
                    </div>

                    <div class="animation-container">
                        <div class="animation-header"><span class="animation-title">Geser titik biru untuk mengubah sudut</span></div>
                        
                        <div class="unit-circle-container">
                            <svg id="unitCircleSvg" viewBox="0 0 400 400" style="width: 100%; height: auto; touch-action: none;">
                                <!-- Grid -->
                                <defs>
                                    <pattern id="smallGrid" width="20" height="20" patternUnits="userSpaceOnUse">
                                        <path d="M 20 0 L 0 0 0 20" fill="none" stroke="var(--border-light)" stroke-width="0.5"/>
                                    </pattern>
                                </defs>
                                <rect width="100%" height="100%" fill="url(#smallGrid)" />
                                
                                <!-- Axes -->
                                <line x1="0" y1="200" x2="400" y2="200" class="axis-line" />
                                <line x1="200" y1="0" x2="200" y2="400" class="axis-line" />
                                
                                <!-- Unit Circle -->
                                <circle cx="200" cy="200" r="150" fill="none" stroke="var(--border-color)" stroke-width="2" />
                                
                                <!-- Triangle Lines -->
                                <line id="lineRadius" x1="200" y1="200" x2="350" y2="200" class="radius-line" />
                                <line id="lineSin" x1="350" y1="200" x2="350" y2="200" class="projection-line" style="stroke: #e74c3c;"/>
                                <line id="lineCos" x1="200" y1="200" x2="350" y2="200" class="projection-line" style="stroke: #3498db;"/>
                                
                                <!-- Arc Indicator -->
                                <path id="angleArc" d="" fill="var(--accent-lighter)" stroke="var(--accent-primary)" stroke-width="1"/>
                                
                                <!-- Labels -->
                                <text id="labelAngle" x="225" y="190" fill="var(--text-primary)" font-size="16">0°</text>
                                <text id="labelSin" x="355" y="200" fill="#e74c3c" font-size="14" font-weight="bold">Sin: 0</text>
                                <text id="labelCos" x="260" y="215" fill="#3498db" font-size="14" font-weight="bold">Cos: 1</text>
                                
                                <!-- Interactive Point -->
                                <circle id="dragPoint" cx="350" cy="200" r="10" fill="#3498db" class="interactive-point" />
                            </svg>
                        </div>

                        <div class="trig-info-panel">
                            <div class="trig-stat" style="border-bottom: 3px solid #e74c3c;">
                                <span class="trig-label">Sin (Depan)</span>
                                <span class="trig-value val-sin" id="dispSin">0.00</span>
                            </div>
                            <div class="trig-stat" style="border-bottom: 3px solid #3498db;">
                                <span class="trig-label">Cos (Samping)</span>
                                <span class="trig-value val-cos" id="dispCos">1.00</span>
                            </div>
                            <div class="trig-stat" style="border-bottom: 3px solid #f1c40f;">
                                <span class="trig-label">Tan (Depan/Samp)</span>
                                <span class="trig-value val-tan" id="dispTan">0.00</span>
                            </div>
                        </div>
                        
                        <div class="slider-control" style="margin-top: 20px;">
                            <span class="slider-label">Sudut:</span>
                            <input type="range" class="slider-input" id="angleSlider" min="0" max="360" value="0">
                            <span class="slider-value" id="angleVal">0°</span>
                        </div>
                    </div>
                </section>

                <!-- Example Problems -->
                <section class="content-section" id="contoh-soal">
                    <div class="section-header">
                        <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
                        <h2 class="section-title">Contoh Soal</h2>
                    </div>
                    <div class="example-card">
                        <div class="example-header"><span class="example-number">1</span><span class="example-title">Nilai Trigonometri</span></div>
                        <div class="example-body">
                            <p class="example-question">Hitunglah nilai cos 60° + sin 30°.</p>
                            <div class="solution-steps">
                                <div class="solution-step"><span class="step-marker">1</span><div class="step-content"><span class="step-label">Nilai Sudut</span><p class="step-text">cos 60° = 1/2 dan sin 30° = 1/2.</p></div></div>
                                <div class="solution-step"><span class="step-marker">2</span><div class="step-content"><span class="step-label">Operasi</span><p class="step-text">Jumlahkan kedua nilai:</p><span class="step-math">1/2 + 1/2 = 1</span></div></div>
                            </div>
                            <div class="example-answer"><svg class="answer-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg><span class="answer-text">Hasil = 1</span></div>
                        </div>
                    </div>
                </section>

                <!-- Practice Problems -->
                <section class="content-section" id="latihan-soal">
                    <div class="section-header">
                        <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
                        <h2 class="section-title">Latihan Soal</h2>
                    </div>
                    <div class="practice-grid">
                        <div class="practice-item"><span class="practice-number">1</span><div class="practice-content"><p class="practice-question">Hitung nilai tan 45° + sin 90°.</p></div></div>
                        <div class="practice-item"><span class="practice-number">2</span><div class="practice-content"><p class="practice-question">Buktikan sin² 30° + cos² 30° = 1.</p></div></div>
                        <div class="practice-item"><span class="practice-number">3</span><div class="practice-content"><p class="practice-question">Sebuah segitiga memiliki sisi a=10, b=6, dan sudut C=30°. Hitung sisi c.</p></div></div>
                    </div>
                </section>

                <!-- Quiz Section -->
                <section class="content-section" id="kuis">
                    <div class="section-header">
                        <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                        <h2 class="section-title">Kuis Trigonometri</h2>
                    </div>
                    <div id="quizContainer"></div>
                </section>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-inner">
                <div class="footer-brand">
                    <span class="footer-name">Media Belajar Daffa</span>
                    <span class="footer-class">Muhammad Daffa Athallah - XII-M4-1</span>
                </div>
                <div class="footer-info">Platform Pembelajaran Mandiri</div>
            </div>
        </footer>
    </div>

    <script src="script.js"></script>
    <script src="quiz-engine.js"></script>
    <script>
        // Quiz Data
        const quizQuestions = [
            { question: "Nilai cos 60° adalah...", options: ["1/2", "√3/2", "1/√2", "1"], correct: 0, explanation: "Cos 60° = 1/2." },
            { question: "sin² θ + cos² θ = ...", options: ["1", "0", "2", "tan θ"], correct: 0, explanation: "Identitas Pythagoras dasar." },
            { question: "Nilai tan 45° adalah...", options: ["1", "0", "√3", "1/√3"], correct: 0, explanation: "Tan 45° = 1." },
            { question: "Jika sin θ = 3/5, maka cos θ adalah...", options: ["4/5", "3/4", "5/4", "5/3"], correct: 0, explanation: "cos² = 1 - sin² = 1 - 9/25 = 16/25 -> cos = 4/5." },
            { question: "Nilai sin 90° adalah...", options: ["1", "0", "1/2", "Tak terdefinisi"], correct: 0, explanation: "Sin 90° mencapai puncak, yaitu 1." }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            new QuizEngine('quizContainer', quizQuestions).init();

            const quickNav = document.getElementById('quickNav');
            window.addEventListener('scroll', () => quickNav.classList.toggle('scrolled', window.scrollY > 200));

            // Unit Circle Animation Logic
            const svg = document.getElementById('unitCircleSvg');
            const point = document.getElementById('dragPoint');
            const lineRadius = document.getElementById('lineRadius');
            const lineSin = document.getElementById('lineSin');
            const lineCos = document.getElementById('lineCos');
            const angleArc = document.getElementById('angleArc');
            const angleSlider = document.getElementById('angleSlider');
            
            const centerX = 200, centerY = 200, radius = 150;
            let isDragging = false;

            function updateVisualization(angleDeg) {
                const rad = (angleDeg - 90) * Math.PI / 180; // -90 to start from top
                const x = centerX + radius * Math.cos(rad);
                const y = centerY + radius * Math.sin(rad);

                // Move Point
                point.setAttribute('cx', x);
                point.setAttribute('cy', y);

                // Update Lines
                lineRadius.setAttribute('x2', x);
                lineRadius.setAttribute('y2', y);

                // Sin is vertical projection (height relative to center)
                // In SVG y increases downward, so sin logic is inverted visually but mathematically correct relative to coordinate system
                // Let's visualize: Sin is Y coordinate relative to center.
                // Line for Sin: Horizontal line from point to Y-axis
                lineSin.setAttribute('x1', x); lineSin.setAttribute('y1', y);
                lineSin.setAttribute('x2', centerX); lineSin.setAttribute('y2', y);

                // Cos is X coordinate relative to center.
                // Line for Cos: Vertical line from point to X-axis
                lineCos.setAttribute('x1', x); lineCos.setAttribute('y1', y);
                lineCos.setAttribute('x2', x); lineCos.setAttribute('y2', centerY);

                // Calculate values
                // Standard math angle: 0 is East, counter-clockwise.
                // To match slider (0=Top/North), we map angle.
                const mathRad = (angleDeg * Math.PI / 180);
                const sinVal = Math.sin(mathRad);
                const cosVal = Math.cos(mathRad);
                const tanVal = Math.tan(mathRad);

                // Update Values
                document.getElementById('dispSin').textContent = sinVal.toFixed(2);
                document.getElementById('dispCos').textContent = cosVal.toFixed(2);
                document.getElementById('dispTan').textContent = tanVal.toFixed(2);
                document.getElementById('angleVal').textContent = Math.round(angleDeg) + '°';
                angleSlider.value = angleDeg;

                // Draw Arc
                const arcRadius = 30;
                const startAngle = -Math.PI/2; // Top
                const endAngle = (angleDeg * Math.PI / 180) - Math.PI/2;
                const largeArcFlag = angleDeg > 180 ? 1 : 0;
                
                const startX = centerX + arcRadius * Math.cos(startAngle);
                const startY = centerY + arcRadius * Math.sin(startAngle);
                const endX = centerX + arcRadius * Math.cos(endAngle);
                const endY = centerY + arcRadius * Math.sin(endAngle);
                
                const d = `M ${startX} ${startY} A ${arcRadius} ${arcRadius} 0 ${largeArcFlag} 1 ${endX} ${endY} L ${centerX} ${centerY} Z`;
                angleArc.setAttribute('d', d);

                // Update Labels
                document.getElementById('labelAngle').textContent = Math.round(angleDeg) + '°';
                document.getElementById('labelAngle').setAttribute('x', centerX + 40);
                document.getElementById('labelAngle').setAttribute('y', centerY - 10);
                
                document.getElementById('labelSin').setAttribute('x', Math.min(x+5, 380));
                document.getElementById('labelSin').setAttribute('y', y - 5);
                
                document.getElementById('labelCos').setAttribute('x', x + 5);
                document.getElementById('labelCos').setAttribute('y', centerY + 20);
            }

            // Event Listeners for Dragging
            point.addEventListener('mousedown', () => isDragging = true);
            point.addEventListener('touchstart', (e) => { isDragging = true; e.preventDefault(); });
            
            window.addEventListener('mouseup', () => isDragging = false);
            window.addEventListener('touchend', () => isDragging = false);

            window.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                const rect = svg.getBoundingClientRect();
                const scaleX = 400 / rect.width;
                const mouseX = (e.clientX - rect.left) * scaleX;
                const mouseY = (e.clientY - rect.top) * scaleX;
                
                const dx = mouseX - centerX;
                const dy = mouseY - centerY;
                let angle = Math.atan2(dy, dx) * (180 / Math.PI);
                angle = (angle + 90 + 360) % 360; // Normalize to 0-360 starting from top
                updateVisualization(angle);
            });

            window.addEventListener('touchmove', (e) => {
                if (!isDragging) return;
                const touch = e.touches[0];
                const rect = svg.getBoundingClientRect();
                const scaleX = 400 / rect.width;
                const touchX = (touch.clientX - rect.left) * scaleX;
                const touchY = (touch.clientY - rect.top) * scaleX;
                
                const dx = touchX - centerX;
                const dy = touchY - centerY;
                let angle = Math.atan2(dy, dx) * (180 / Math.PI);
                angle = (angle + 90 + 360) % 360;
                updateVisualization(angle);
            }, { passive: false });

            // Slider Control
            angleSlider.addEventListener('input', (e) => {
                updateVisualization(parseInt(e.target.value));
            });

            // Initial Draw
            updateVisualization(0);
        });
    </script>
</body>
</html>